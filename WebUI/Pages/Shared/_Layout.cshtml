@using Microsoft.AspNetCore.Http
@{
    Layout = null;
    var isLogged = Context.Session.GetString("Token") != null;
    var isProfessor = false;
    var isProfessorStr = Context.Session.GetString("IsProfessor");
    if (!string.IsNullOrEmpty(isProfessorStr))
    {
        bool.TryParse(isProfessorStr, out isProfessor);
    }
}
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>@ViewData["Title"] - Reforço Web</title>
    <link rel="stylesheet" href="~/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/bootstrap-extended.css" />
    <link rel="stylesheet" href="~/css/app.css" />
    <link rel="stylesheet" href="~/css/dark-theme.css" />
    <link rel="stylesheet" href="~/css/semi-dark.css" />
    <link rel="stylesheet" href="~/css/header-colors.css" />
    <link rel="stylesheet" href="~/css/icons.css" />
    <link rel="stylesheet" href="~/plugins/metismenu/css/metisMenu.min.css" />
    <link rel="stylesheet" href="~/css/site.css" />
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet">
</head>
<body>
    <div class="wrapper">
        @if (isLogged)
        {
            <div class="sidebar-wrapper" id="sidebar">
                <div class="sidebar-header">
                    <div>
                        <span class="logo-text" style="font-size:22px;color:#008cff;font-weight:bold;">Plataforma de Reforço</span>
                    </div>
                    <div class="toggle-icon ms-auto" id="sidebarToggle"><i class='bx bx-arrow-back'></i></div>
                </div>
                <ul class="metismenu" id="menu">
                    <li><a href="/Dashboard/Index"><div class="parent-icon"><i class='bx bx-home-alt'></i></div><div class="menu-title">Dashboard</div></a></li>
                    @if (isProfessor)
                    {
                        <li><a href="/Turmas/Index"><div class="parent-icon"><i class='bx bx-category'></i></div><div class="menu-title">Turmas</div></a></li>
                        <li><a href="/Alunos/Index"><div class="parent-icon"><i class='bx bx-user'></i></div><div class="menu-title">Alunos</div></a></li>
                        <li><a href="/Provas/Index"><div class="parent-icon"><i class='bx bx-book-open'></i></div><div class="menu-title">Provas</div></a></li>
                    }
                    else
                    {
                        <li><a href="/Alunos/Provas"><div class="parent-icon"><i class='bx bx-test-tube'></i></div><div class="menu-title">Minhas Provas</div></a></li>
                    }
                    <li><a href="/Auth/Logout"><div class="parent-icon"><i class='bx bx-log-out'></i></div><div class="menu-title">Sair</div></a></li>
                </ul>
            </div>
            <div class="overlay d-none" id="sidebarOverlay"></div>
            <div class="page-wrapper">
                <div class="topbar">
                    <nav class="navbar">
                        <span class="navbar-brand mb-0 h1">@ViewData["Title"]</span>
                    </nav>
                </div>
                <div class="page-content">
                    @RenderBody()
                </div>
            </div>
        }
        else
        {
            <div class="auth-wrapper">
                @RenderBody()
            </div>
        }
    </div>
    <script src="~/js/jquery.min.js"></script>
    <script src="~/js/bootstrap.bundle.min.js"></script>
    <script src="~/plugins/metismenu/js/metisMenu.min.js"></script>
    <script src="~/js/app.js"></script>
    <script src="~/js/sidebar.js"></script>
    <script>
        // Sidebar toggle para overlay em mobile
        document.addEventListener('DOMContentLoaded', function () {
            var sidebar = document.getElementById('sidebar');
            var overlay = document.getElementById('sidebarOverlay');
            var toggle = document.getElementById('sidebarToggle');
            if (toggle) {
                toggle.addEventListener('click', function () {
                    sidebar.classList.toggle('toggled');
                    overlay.classList.toggle('d-none');
                });
            }
            if (overlay) {
                overlay.addEventListener('click', function () {
                    sidebar.classList.remove('toggled');
                    overlay.classList.add('d-none');
                });
            }
            // Inicializar metismenu
            if (window.$ && $('#menu').metisMenu) {
                $('#menu').metisMenu();
            }
        });
    </script>
</body>
</html>